tls:
  certificates:
    - certFile: /ssl/cert.pem
      keyfile: /ssl/privkey.pem
#       stores:
#         - default
#   stores:
#     default:
#       defaultCertificate:
#         certFile: /ssl/live/{{ homecentr_root_domain }}/cert.pem
#         keyfile: /ssl/live/{{ homecentr_root_domain }}/privkey.pem

http:
  middlewares:
    redirect-to-https:
      redirectScheme:
        scheme: https
        permanent: true

  routers:
    http-catch-all:
      rule: HostRegexp(`{any:.+}`)
      entrypoints:
        - web
      middlewares:
        - redirect-to-https
      service: noop@internal

    api:
      tls: true
      rule: "Host(`ingress.{{ homecentr_root_domain }}`)"
      entrypoints:
        - websecure
      service: api@internal

    metrics:
      tls: true
      rule: Host(`ingress-metrics.{{ homecentr_root_domain }}`)
      entrypoints:
        - websecure
      service: prometheus@internal